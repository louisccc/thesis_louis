\section{Related Work}
\label{c:related_work} 

% Programming MagnetOS and LooCI 
There are many research projects focusing on IoT middleware solutions and address different parts of IoTâ€™s challenges. For the programmability, MagnetOS simplifies the programming on distributed systems over ad-hoc network. It automatically and transparently partitions applications into components and dynamically finds them a placement on nodes within the network to reduce energy consumption and to increase system longevity. LooCI is another middleware solution which provides a clean separation of distribution concerns from component implementation, supports multiple languages and operating systems[1]. They made loosely-coupled components reconfigurable in run-time for WSN applications. The LooCI component model supports interoperability and dynamic binding. \cite{Bao1999}

% Service selection and Service Composition 

Dynamic binding in service-oriented architecture is the process when an abstract service is going to be concretized to an existing service. Several works model dynamic binding as a service selection problem\cite{Liu2013,Yu2005,Huang2009}. When one base service can not fulfill the requested composite, they proposed some automatic service composition to make up a solution for requester. But they only focus on the performance issues and only discuss the QoS parameters relating to web service.

% Context-aware sensor search Sensor Selection

The difference between a web service and an IoT service are that IoT service needs more context parameter to characterize it instead of just performance parameters. Some works provide interface for user to express their requirement and middleware will search for relating result for requester. Sensing as a service is an example of such concept. Perera et al proposed CASSARAM to provide sensor searching support via context information and sensor metadata information\cite{Perera} . Utilizing semantic sensor network ontology as their sensor context model, IoT user can specify their requirement through point-based requirements and proximity-based requirements. CASSARAM searches for available sensor in repository and filters them by point-based requirements such as sensor type and location. The filtered result will perform a further ranking process according to proximity-based requirements, return with a ranked list of sensors. This work provides how sensor search service works with IoT by utilizing context information. In CA4IOT proposed by Perera et al\cite{Perera2013}, they allowed user to submit their problems, then CA4IOT can understand the problems and produces more comprehensive and meaningful information than the raw sensor data streams generated by individual sensor. 

Teixeira et al proposed a service-oriented middleware for IoT and their concept is the most similar to ours\cite{Teixeira2013}. They envisioned IoT middleware consist of three parts: discovery module, and estimation and composition module and a knowledge base. The estimation and composition module will first expand the queried IoT application to all possible service data flows and then do mapping to the actual network topology and then perform optimization process. This is very similar to our concept except for the way the programmers interact with middleware.

Ideally, a middleware should provide programmers to express their requirements of IoT applications in a comprehensive way. Based on the requirements of IoT application, the middleware should be able to perform intelligent dynamic process to best fit user requirements. And provide run-time progression support after the application has been deployed. In our proposed solution, we let IoT developer to enter define knowledge of IoT master, and let IoT programmer to compile down their requirements by using an drag-and-drop GUI to compose their application. For each service components, we provide a tool to let user to adjust the weight sets to specify their service metadata requirement for each service component. Finally we provide matchmaking process between service components and low-level running service. 