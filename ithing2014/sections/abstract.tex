\begin{abstract}

Systems built for future Internet of Things (IoT) may have a large number of intelligent objects with sensing, actuating, and computing capabilities. Different applications can be deployed on the same IoT network at different time for different purposes. The WuKong IoT middleware is aimed to support a flexible service-oriented paradigm to simplify the programming of IoT systems and to achieve the best QoS performance for each user application. It is therefore important for IoT middleware to provide a good map and matchmaking from the programmer's request to available physical resources intelligently and efficiently. In this paper, we propose the user-directed matchmaking mechanism for application components with a set of rich QoS parameters. Some components can be implemented as a compound service consisting of a set of primitive sensors. Our design also allows some sensor knowledge to be included in the mapping support. Our goal is to provide IoT programmer a programming tool that can help them to express their requirements without considering low-level consideration. The detailed system design is presented, as well as some example applications using our proposed middleware.

\end{abstract}